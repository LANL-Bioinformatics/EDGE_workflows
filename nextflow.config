
params {

    //input
    pairedFiles = ["test_data/Ecoli_10x.1.fastq", "test_data/Ecoli_10x.2.fastq"]
    unpairedFiles = ["${projectDir}/nf_assets/NO_FILE2"]

    //which modules are run
    modules {
        sra2fastq = false
        faqcs = true
        annotation = false
    }

    //module parameters -- passed directly into subworkflows according to best practices
    //these are the default values
    shared {
        outDir = "./testing_output"
        projName = "PROJECT"
        cpus = 8
    }

    sra2fastq {
        clean = null
        platformRestrict = null
        accessions = []
    }

    faqcs{
        //adapter = "${projectDir}/nf_assets/NO_FILE3"
        adapter = "${projectDir}/test_data/adapters.fasta"

        qualityCutoff = 5
        minLength = 50
        avgQuality = 0
        numN = 10
        lowComplexity = 0.85
        cut3end = 0
        cut5end = 0
        splitSize = 1000000

        ontFlag = true
        pacbioFlag = false
        polyA = true

        phredOffset = null

        porechop = true
    }

    annotation {
        taxKingdom = null
        annotateProgram = "prokka" //default
        customProtein = "nf_assets/NO_FILE" //setup for optional file pattern
        customHMM = "nf_assets/NO_FILE2"
        sourceGBK = null
        evalue = null
        gcode = null
        keggView = false
    }

}

//container settings
singularity {
    enabled = true
    runOptions = "--compat"
}


//which containers to use for which processes
process {
    withLabel: 'sra2fastq' {
        container = 'kaijli/sra2fastq:1.6.3'
    }
    withLabel: 'countFastq' {
        container = 'apwat/count_fastq:0.1'
    }
    withLabel: 'qc'{
        container='apwat/run_faqcs:1.4'
    }
}

//submission rate limit: needed for sra2fastq to operate correctly
executor {
    submitRateLimit = '1/5sec'
}

//cleanup
cleanup = true

workflow.onComplete = {
    "rm -rf nf_assets".execute().text
}

workflow.onError = {
    "rm -rf nf_assets".execute().text
}
